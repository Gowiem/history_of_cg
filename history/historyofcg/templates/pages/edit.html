{% extends 'default/base.html' %}
{% load staticfiles %}
{% block body_header %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles-form.css' %}" once="1">
    <link rel="stylesheet" type="text/css" href="{% static 'css/token-input.css' %}" once="1">
    <link rel="stylesheet" type="text/css" href="{% static 'css/token-input-hcg.css' %}" once="1">

    <script type="text/javascript" src="{% static 'js/libs/jquery-tokeninput-1.6.0-min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/libs/djtokeninput.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/libs/jquery.form.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/entry-extras.js' %}"></script>

    <script type="text/javascript">
        $('.tabs-min').tabs();
    </script>

{% endblock %}
{% block content %}
    <div id="content">
        <div class="message" style="display: none;"></div>
        <div class="form-container">
            <div id="toolbar">
                <div class="title"><h1>Edit Entry</h1></div>
                <div class="publish-status">{% if page.published %}Published{% else %}Not Published{% endif %}
                </div>
                <div class="view"><a class="button organization-hover" href="/pages/{{ page.vanity_url }}">View Entry</a></div>
                <div class="save">
                    {% if page.published %}<button class="publish-page organization-hover" data-vanity-url="{{ page.vanity_url }}">Unpublish</button>
                    {% else %}<button class="publish-page organization-hover" data-vanity-url="{{ page.vanity_url }}">Publish</button>
                    {% endif %}
                </div>
                <div class="cf"></div>
            </div>
            <form action="/edit/page/{{ page.vanity_url }}/" method="POST" id="EntryEditForm">{% csrf_token %}
                <div id="main-stub" class="stub section-in-form">
                    <ul class="required-labels all-labels">
                        <ul class="required-labels all-labels">
                            <li class="label-entry-type labels">Type of Page <span class="required">*</span></li>
                            <li class="label-entry-name labels">Entry name <span class="required">*</span></li>
                            <li class="label-entry-name labels">Vanity URL <span class="required">*</span></li>
                            <li class="label-entry-name labels">Image URL <span class="required">*</span></li>
                            <li class="label-entry-tags labels">Tags <span class="required">*</span></li>
                        </ul>
                    </ul>
                    <ul class="required-fields all-fields">
                        <li class="entry-type fields">
                            {{ form.type.errors }}
                            {{ form.type }}
                        </li>
                        <li class="entry-name fields">
                            {{ form.name.errors }}
                            {{ form.name }}
                        </li>
                        <li class="entry-name fields">
                            {{ form.vanity_url.errors }}
                            {{ form.vanity_url }}
                        </li>
                        <li class="entry-image fields">
                            <input name="image" id="id_image" type="text" class="need-helper {{ page.type }}" value="{{ page.image }}">
                            <span id="helper-story-body" class="helper-popups {{ page.type }}-border">Put a URL for the image you want to represent your page!</span>
                        </li>
                        <li class="entry-tags fields">
                            {{ form.tags.errors }}
                            {{ form.tags }}
                        </li>
                    </ul>
                    <div class="cf"></div>
                </div>
                <div class="basics section-in-form">
                    <ul class="basic-labels all-labels">
                        <li class="label-entry-description labels" style="margin-top: 10px;">Description <span class="required"></span></li>
                        <li class="label-entry-date labels" style="margin-top: 140px;">Homepage</li>
                        <li class="label-entry-date labels">Date Established</li>
                    </ul>
                    <ul class="basic-fields all-fields">
                        <li class="entry-description fields">
                            {{ form.description.errors }}
                            {{ form.description }}
                        </li>
                        <li class="entry-homepage fields">
                            {{ form.homepage.errors }}
                            {{ form.homepage }}
                        </li>
                        <li class="entry-date fields">
                            {{ form.date_established.errors }}
                            {{ form.date_established }}
                        </li>
                    </ul>
                    <div class="cf"></div>
                </div>
                <input type="submit" value="{% if page.published %}Save{% else %}Save Draft{% endif %}" />
            </form>
            <div class="stories-col section-in-form">
                <ul class="story-explanation">
                    <li class="label-story-header labels"><h2>Add a Story or Media</h2></li>
                    <li class="story-helpertext"><p>Did you contribute to the development of an innovative technology or project? Did you have a chance to work with someone brimming with amazing talent? Here is a chance to share them!</p></li>
                    <li class="share"><button class="btn-story organization-hover" data-href="/share/story/{{ page.vanity_url }}/">Share Stories or Add Media</button></li>
                </ul>
                <div class="story-container hide"></div>
                {% for story in user_text_stories %}
                    {% include 'pages/edit_story.html' %}
                {% endfor %}
                {% for story in user_image_stories %}
                    {% include 'pages/edit_story.html' %}
                {% endfor %}
                {% for story in user_video_stories %}
                    {% include 'pages/edit_story.html' %}
                {% endfor %}
            </div>
            {% include 'pages/create_connections.html' %}
        </div>
    </div>
{% endblock %}